---
title: "BÃ i 9"
subtitle: "Pipe"
author: "Ong PhÃºc Thá»‹nh, KhÆ°Æ¡ng Quá»³nh Long"
format: revealjs
echo: true 
---

![](images3/image1a.jpg){fig-align="center"}

## Package "magrittr"

-   CÃ¡c "pipe" trong package "magrittr" lÃ m thay Ä‘á»•i cáº¥u trÃºc lá»‡nh R, giÃºp viá»‡c viáº¿t cÃ¢u lá»‡nh trá»Ÿ nÃªn hiá»‡u quáº£ vÃ  máº¡ch láº¡c hÆ¡n.
-   Gá»“m 4 loáº¡i
    -   **%\>%** (Ä‘Æ°á»£c tÃ­ch há»£p trong há»‡ tidyverse)
    -   %T%
    -   %\$%
    -   **%\<\>%**

## Forward pipe %\>%

-   ÄÃ¢y lÃ  dáº¡ng pipe thÃ´ng dá»¥ng nháº¥t. CÃ´ng dá»¥ng cá»§a nÃ³ lÃ  chuyá»ƒn toÃ n bá»™ káº¿t quáº£ cá»§a hÃ m Ä‘i trÆ°á»›c thÃ nh Ä‘áº§u vÃ o cho hÃ m Ä‘i sau
-   CÃ³ thá»ƒ káº¿t há»£p nhiá»u %\>% Ä‘á»ƒ thÃ nh má»™t "dÃ²ng cháº£y" dá»¯ liá»‡u, cá»© dá»¯ liá»‡u phÃ­a trÆ°á»›c dáº¥u %\>% sáº½ lÃ  Ä‘áº§u vÃ o cho phÃ­a sau, káº¿t quáº£ xuáº¥t ra cuá»‘i cÃ¹ng sáº½ lÃ  hÃ m cuá»‘i cÃ¹ng phÃ­a sau %\>% cuá»‘i cÃ¹ng

## Forward pipe %\>%

```{r}
# VÃ­ dá»¥ dá»¯ liá»‡u titanic
library(magrittr) 
# Xem 6 dÃ²ng Ä‘áº§u cá»§a dá»¯ liá»‡u
# R base
head(Titanic)
```

## Forward pipe %\>%

```{r}
# Forward Pipe
Titanic %>% head()
```

## VÃ­ dá»¥ 1

-   Trong trÆ°á»ng há»£p phá»©c táº¡p hÆ¡n, vÃ­ dá»¥ náº¿u muá»‘n sáº¯p xáº¿p láº¡i data titanic theo chiá»u tá»« nhá» tá»›i lá»›n theo biáº¿n Age, sau Ä‘Ã³ coi 6 dÃ²ng Ä‘áº§u

    -   CÃ¡ch 1: Viáº¿t theo chiá»u tá»« Pháº£i --\> trÃ¡i. Tá»©c lÃ  cáº§n nhiá»u () lá»“ng vÃ o nhau head(arrange(titanic, Age))
    -   CÃ¡ch 2: qua má»—i bÆ°á»›c, lÆ°u láº¡i má»™t data trung gian, rá»“i láº¥y data trung gian Ä‘á»ƒn lÃ m tiáº¿p bÆ°á»›c sau ğŸ¡ª táº¡o ra nhiá»u object trung gian
    -   CÃ¡ch 3: dÃ¹ng pipe titanic %\>% arrange(Age) %\>% head()

## VÃ­ dá»¥ 1

```{r}
head(arrange(Titanic, Age)) ~ Titanic %>% arrange(Age) %>% head()

```

## VÃ­ dá»¥ 2

-   YÃªu cáº§u
    -   Chuyá»ƒn Ä‘á»•i biáº¿n Survived vá»›i 0 = "No", 1 = "Yes".
    -   Chá»‰ chá»n cÃ¡c biáº¿n Survived + Pclass + Sex + Age.
    -   Sáº¯p xáº¿p sá»‘ liá»‡u theo tá»© tá»± tÄƒng dáº§n cá»§a Age
    -   Táº¡o biáº¿n Adult vá»›i 2 giÃ¡ trá»‹ "Yes" náº¿u \>= 18 vÃ  "No" náº¿u \< 18.
    -   TÃ³m táº¯t sá»‘ lÆ°á»£ng máº«u theo biáº¿n Survived + Pclass + Adult **CÃ¡ch lÃ m?**

## VÃ­ dá»¥ 2

-   Vá»›i pipe

```{r}
#| echo: false
library(tidyverse)
```

```         
Titanic                                                   %>% 
  mutate(Survived = ifelse(Survived == 1, " Yes", "No"))  %>%
  select(-c(PassengerId, Name))                           %>%
  arrange(Age)                                            %>%
  mutate(Adult = ifelse(Age >= 18, "Yes", "No"))          %>%
  group_by(Survived, Pclass, Adult)                       %>%
  summarise(Freq = n())
```

## Backward pipe %\<\>%

-   KhÃ¡c vá»›i forward pipe, backward pipe sau khi láº¥y dá»¯ liá»‡u bÃªn trÃ¡i lÃ m Ä‘áº§u vÃ o, dá»¯ liá»‡u sáº½ Ä‘Æ°á»£c xá»­ lÃ½ báº±ng hÃ m bÃªn pháº£i vÃ  tráº£ vá» káº¿t quáº£ lÃ  hÃ m bÃªn trÃ¡i.
-   ChÃº Ã½: káº¿t quáº£ tráº£ vá» vÃ  thay tháº¿ Ä‘áº§u vÃ o bÃªn trÃ¡i, do Ä‘Ã³ cáº§n pháº£i ráº¥t tháº­n trá»ng khi sá»­ dá»¥ng backward pipe

## VÃ­ dá»¥ 1

-   Muá»‘n loáº¡i bá» biáº¿n PassengerId ra khá»i data set vÃ  lÆ°u láº¡i káº¿t quáº£ nÃ y
-   CÃ¡ch 1: DÃ¹ng forward pipe

titanic \<- titanic %\>% select(-PassengerId)

-   CÃ¡ch 2: DÃ¹ng backward pipe

titanic %\<\>% select(-PassengerId)

-   Tuy nhiÃªn dá»¯ liá»‡u titanic gá»‘c Ä‘Ã£ bá»‹ thay tháº¿ báº±ng dá»¯ liá»‡u má»›i (máº¥t biáº¿n PassengerId), do Ä‘Ã³ tháº­n trá»ng khi sá»­ dá»¥ng
